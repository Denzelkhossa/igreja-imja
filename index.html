<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprende Moçambique</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <!-- Ícones -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos personalizados */
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8fafc;
        }
        
        .course-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .progress-bar {
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.5s ease;
        }
        
        .admin-only {
            display: none;
        }
        
        .admin-logged-in .admin-only {
            display: block;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        /* Animações */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .course-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 480px) {
            .course-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Cabeçalho -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
                    <span class="text-white font-bold text-lg">AM</span>
                </div>
                <h1 class="text-xl font-bold text-blue-600">Aprende Moçambique</h1>
            </div>
            
            <nav class="hidden md:flex space-x-6">
                <a href="#inicio" class="text-gray-700 hover:text-blue-600 font-medium">Início</a>
                <a href="#cursos" class="text-gray-700 hover:text-blue-600 font-medium">Cursos</a>
                <a href="#categorias" class="text-gray-700 hover:text-blue-600 font-medium">Categorias</a>
                <a href="#sobre" class="text-gray-700 hover:text-blue-600 font-medium">Sobre</a>
            </nav>
            
            <div class="flex items-center space-x-4">
                <!-- Botão de IA -->
                <button id="ai-assistant-btn" class="p-2 rounded-full bg-blue-100 text-blue-600 hover:bg-blue-200 transition">
                    <i class="fas fa-robot"></i>
                </button>
                
                <!-- Área do usuário -->
                <div id="user-area" class="hidden">
                    <div class="flex items-center space-x-2">
                        <span id="user-name" class="text-gray-700"></span>
                        <div class="relative">
                            <button id="user-menu-btn" class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center">
                                <i class="fas fa-user"></i>
                            </button>
                            <div id="user-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden">
                                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Meu Perfil</a>
                                <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Meus Cursos</a>
                                <a href="#" class="admin-only block px-4 py-2 text-gray-700 hover:bg-gray-100">Painel Admin</a>
                                <a href="#" id="logout-btn" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Sair</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Botões de login/cadastro -->
                <div id="auth-buttons" class="flex space-x-2">
                    <button id="login-btn" class="px-4 py-2 text-blue-600 border border-blue-600 rounded-md hover:bg-blue-50 transition">Entrar</button>
                    <button id="signup-btn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Cadastrar</button>
                </div>
            </div>
            
            <button id="mobile-menu-btn" class="md:hidden text-gray-700">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
        
        <!-- Menu móvel -->
        <div id="mobile-menu" class="md:hidden bg-white border-t hidden">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#inicio" class="text-gray-700 hover:text-blue-600 font-medium">Início</a>
                <a href="#cursos" class="text-gray-700 hover:text-blue-600 font-medium">Cursos</a>
                <a href="#categorias" class="text-gray-700 hover:text-blue-600 font-medium">Categorias</a>
                <a href="#sobre" class="text-gray-700 hover:text-blue-600 font-medium">Sobre</a>
            </div>
        </div>
    </header>

    <!-- Conteúdo principal -->
    <main>
        <!-- Seção Hero -->
        <section id="inicio" class="bg-gradient-to-r from-blue-600 to-blue-800 text-white py-16">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-4xl font-bold mb-4">Aprenda habilidades práticas para o desenvolvimento de Moçambique</h2>
                <p class="text-xl mb-8 max-w-2xl mx-auto">Cursos gratuitos em diversas áreas, com certificado válido e suporte de IA personalizado.</p>
                <button class="px-6 py-3 bg-white text-blue-600 rounded-md font-medium hover:bg-gray-100 transition">Explorar Cursos</button>
            </div>
        </section>

        <!-- Seção de Cursos em Destaque -->
        <section id="cursos" class="py-12">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold mb-8 text-center">Cursos em Destaque</h2>
                
                <!-- Filtros de categoria -->
                <div class="flex flex-wrap justify-center gap-2 mb-8">
                    <button class="category-filter px-4 py-2 bg-blue-600 text-white rounded-full active" data-category="all">Todos</button>
                    <button class="category-filter px-4 py-2 bg-gray-200 text-gray-700 rounded-full" data-category="empreendedorismo">Empreendedorismo</button>
                    <button class="category-filter px-4 py-2 bg-gray-200 text-gray-700 rounded-full" data-category="agricultura">Agricultura</button>
                    <button class="category-filter px-4 py-2 bg-gray-200 text-gray-700 rounded-full" data-category="programacao">Programação</button>
                    <button class="category-filter px-4 py-2 bg-gray-200 text-gray-700 rounded-full" data-category="idiomas">Idiomas</button>
                    <button class="category-filter px-4 py-2 bg-gray-200 text-gray-700 rounded-full" data-category="saude">Saúde</button>
                    <button class="category-filter px-4 py-2 bg-gray-200 text-gray-700 rounded-full" data-category="religiao">Religião</button>
                </div>
                
                <!-- Grid de cursos -->
                <div id="courses-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Os cursos serão carregados dinamicamente via JavaScript -->
                </div>
            </div>
        </section>

        <!-- Seção de Categorias -->
        <section id="categorias" class="py-12 bg-gray-100">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold mb-8 text-center">Categorias de Cursos</h2>
                
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <div class="bg-white rounded-lg shadow p-6 text-center hover:shadow-md transition">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-business-time text-blue-600 text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Empreendedorismo</h3>
                        <p class="text-gray-600">Aprenda a criar e gerir o seu próprio negócio</p>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6 text-center hover:shadow-md transition">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-seedling text-green-600 text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Agricultura</h3>
                        <p class="text-gray-600">Técnicas modernas de cultivo e produção agrícola</p>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6 text-center hover:shadow-md transition">
                        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-code text-purple-600 text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Programação</h3>
                        <p class="text-gray-600">Desenvolva habilidades digitais para o futuro</p>
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-6 text-center hover:shadow-md transition">
                        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-language text-red-600 text-2xl"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Idiomas</h3>
                        <p class="text-gray-600">Aprenda Português, Inglês e outras línguas</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Seção Sobre -->
        <section id="sobre" class="py-12">
            <div class="container mx-auto px-4">
                <div class="max-w-3xl mx-auto text-center">
                    <h2 class="text-3xl font-bold mb-6">Sobre o Aprende Moçambique</h2>
                    <p class="text-lg text-gray-700 mb-6">
                        O Aprende Moçambique é uma plataforma de educação online gratuita, desenvolvida especificamente para atender às necessidades de aprendizagem da população moçambicana. 
                        Oferecemos cursos em diversas áreas com foco em habilidades práticas que podem impulsionar o desenvolvimento pessoal e profissional.
                    </p>
                    <p class="text-lg text-gray-700 mb-6">
                        Nossa missão é tornar a educação acessível a todos, mesmo em regiões com conectividade limitada, através de recursos otimizados para baixo consumo de dados 
                        e funcionalidades de download para estudo offline.
                    </p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <div class="flex items-center">
                            <i class="fas fa-graduation-cap text-blue-600 text-2xl mr-2"></i>
                            <span>Certificados Gratuitos</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-mobile-alt text-blue-600 text-2xl mr-2"></i>
                            <span>Otimizado para Mobile</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-wifi text-blue-600 text-2xl mr-2"></i>
                            <span>Baixo Consumo de Dados</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-robot text-blue-600 text-2xl mr-2"></i>
                            <span>Assistente de IA</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Rodapé -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Aprende Moçambique</h3>
                    <p class="text-gray-400">Plataforma de cursos online gratuitos para o desenvolvimento de Moçambique.</p>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Links Rápidos</h3>
                    <ul class="space-y-2">
                        <li><a href="#inicio" class="text-gray-400 hover:text-white transition">Início</a></li>
                        <li><a href="#cursos" class="text-gray-400 hover:text-white transition">Cursos</a></li>
                        <li><a href="#categorias" class="text-gray-400 hover:text-white transition">Categorias</a></li>
                        <li><a href="#sobre" class="text-gray-400 hover:text-white transition">Sobre</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-xl font-bold mb-4">Contato</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2 text-gray-400"></i>
                            <span class="text-gray-400">contato@aprendemocambique.co.mz</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-phone mr-2 text-gray-400"></i>
                            <span class="text-gray-400">+258 84 123 4567</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2023 Aprende Moçambique. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Modal de Login -->
    <div id="login-modal" class="modal">
        <div class="modal-content p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Entrar na Plataforma</h3>
                <button id="close-login-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="login-form" class="space-y-4">
                <div>
                    <label for="login-email" class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                    <input type="email" id="login-email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                
                <div>
                    <label for="login-password" class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
                    <input type="password" id="login-password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                
                <button type="submit" class="w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Entrar</button>
                
                <div class="text-center">
                    <span class="text-gray-600">ou</span>
                </div>
                
                <button type="button" id="google-login-btn" class="w-full py-2 bg-white border border-gray-300 rounded-md flex items-center justify-center space-x-2 hover:bg-gray-50 transition">
                    <i class="fab fa-google text-red-500"></i>
                    <span>Entrar com Google</span>
                </button>
                
                <div class="text-center text-sm">
                    <span class="text-gray-600">Não tem uma conta? </span>
                    <button type="button" id="switch-to-signup" class="text-blue-600 hover:underline">Cadastre-se</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Cadastro -->
    <div id="signup-modal" class="modal">
        <div class="modal-content p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Criar Conta</h3>
                <button id="close-signup-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="signup-form" class="space-y-4">
                <div>
                    <label for="signup-name" class="block text-sm font-medium text-gray-700 mb-1">Nome Completo</label>
                    <input type="text" id="signup-name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                
                <div>
                    <label for="signup-email" class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                    <input type="email" id="signup-email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                
                <div>
                    <label for="signup-password" class="block text-sm font-medium text-gray-700 mb-1">Senha</label>
                    <input type="password" id="signup-password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required minlength="6">
                </div>
                
                <div>
                    <label for="signup-confirm-password" class="block text-sm font-medium text-gray-700 mb-1">Confirmar Senha</label>
                    <input type="password" id="signup-confirm-password" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required minlength="6">
                </div>
                
                <button type="submit" class="w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Criar Conta</button>
                
                <div class="text-center">
                    <span class="text-gray-600">ou</span>
                </div>
                
                <button type="button" id="google-signup-btn" class="w-full py-2 bg-white border border-gray-300 rounded-md flex items-center justify-center space-x-2 hover:bg-gray-50 transition">
                    <i class="fab fa-google text-red-500"></i>
                    <span>Cadastrar com Google</span>
                </button>
                
                <div class="text-center text-sm">
                    <span class="text-gray-600">Já tem uma conta? </span>
                    <button type="button" id="switch-to-login" class="text-blue-600 hover:underline">Entrar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal do Assistente de IA -->
    <div id="ai-modal" class="modal">
        <div class="modal-content p-6 max-w-2xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Assistente de IA</h3>
                <button id="close-ai-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="ai-chat" class="h-64 overflow-y-auto mb-4 p-4 bg-gray-100 rounded-lg">
                <div class="ai-message mb-4">
                    <div class="flex items-start space-x-2">
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-robot text-white"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg max-w-xs md:max-w-md">
                            <p>Olá! Sou o assistente de IA do Aprende Moçambique. Posso ajudar a encontrar cursos, responder perguntas sobre o conteúdo e dar feedback personalizado. Como posso ajudar?</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flex space-x-2">
                <input type="text" id="ai-input" placeholder="Digite sua pergunta..." class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <button id="send-ai-message" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal do Curso -->
    <div id="course-modal" class="modal">
        <div class="modal-content p-6 max-w-4xl">
            <div class="flex justify-between items-center mb-4">
                <h3 id="course-modal-title" class="text-xl font-bold">Detalhes do Curso</h3>
                <button id="close-course-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="course-modal-content">
                <!-- Conteúdo do curso será carregado aqui -->
            </div>
        </div>
    </div>

    <!-- Modal do Painel Admin -->
    <div id="admin-modal" class="modal">
        <div class="modal-content p-6 max-w-4xl max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Painel Administrativo</h3>
                <button id="close-admin-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="admin-tabs flex border-b mb-4">
                <button class="admin-tab active px-4 py-2 font-medium" data-tab="courses">Cursos</button>
                <button class="admin-tab px-4 py-2 font-medium" data-tab="users">Usuários</button>
                <button class="admin-tab px-4 py-2 font-medium" data-tab="stats">Estatísticas</button>
            </div>
            
            <div id="admin-courses-tab" class="admin-tab-content">
                <div class="flex justify-between items-center mb-4">
                    <h4 class="text-lg font-bold">Gerenciar Cursos</h4>
                    <button id="add-course-btn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
                        <i class="fas fa-plus mr-2"></i>Adicionar Curso
                    </button>
                </div>
                
                <div id="admin-courses-list">
                    <!-- Lista de cursos para administração -->
                </div>
            </div>
            
            <div id="admin-users-tab" class="admin-tab-content hidden">
                <h4 class="text-lg font-bold mb-4">Gerenciar Usuários</h4>
                <div id="admin-users-list">
                    <!-- Lista de usuários para administração -->
                </div>
            </div>
            
            <div id="admin-stats-tab" class="admin-tab-content hidden">
                <h4 class="text-lg font-bold mb-4">Estatísticas da Plataforma</h4>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-blue-100 p-4 rounded-lg">
                        <h5 class="font-bold text-blue-800">Total de Usuários</h5>
                        <p id="total-users" class="text-2xl font-bold">0</p>
                    </div>
                    <div class="bg-green-100 p-4 rounded-lg">
                        <h5 class="font-bold text-green-800">Total de Cursos</h5>
                        <p id="total-courses" class="text-2xl font-bold">0</p>
                    </div>
                    <div class="bg-purple-100 p-4 rounded-lg">
                        <h5 class="font-bold text-purple-800">Cursos Concluídos</h5>
                        <p id="completed-courses" class="text-2xl font-bold">0</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Adicionar/Editar Curso -->
    <div id="course-form-modal" class="modal">
        <div class="modal-content p-6 max-w-2xl">
            <div class="flex justify-between items-center mb-4">
                <h3 id="course-form-title" class="text-xl font-bold">Adicionar Novo Curso</h3>
                <button id="close-course-form-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="course-form" class="space-y-4">
                <input type="hidden" id="course-id">
                
                <div>
                    <label for="course-title" class="block text-sm font-medium text-gray-700 mb-1">Título do Curso</label>
                    <input type="text" id="course-title" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                
                <div>
                    <label for="course-description" class="block text-sm font-medium text-gray-700 mb-1">Descrição</label>
                    <textarea id="course-description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                </div>
                
                <div>
                    <label for="course-instructor" class="block text-sm font-medium text-gray-700 mb-1">Professor/Instrutor</label>
                    <input type="text" id="course-instructor" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                
                <div>
                    <label for="course-category" class="block text-sm font-medium text-gray-700 mb-1">Categoria</label>
                    <select id="course-category" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        <option value="">Selecione uma categoria</option>
                        <option value="empreendedorismo">Empreendedorismo</option>
                        <option value="agricultura">Agricultura</option>
                        <option value="programacao">Programação</option>
                        <option value="idiomas">Idiomas</option>
                        <option value="saude">Saúde</option>
                        <option value="religiao">Religião</option>
                    </select>
                </div>
                
                <div>
                    <label for="course-format" class="block text-sm font-medium text-gray-700 mb-1">Formato Principal</label>
                    <select id="course-format" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                        <option value="">Selecione um formato</option>
                        <option value="video">Vídeo</option>
                        <option value="pdf">PDF</option>
                        <option value="audio">Áudio</option>
                        <option value="imagem">Imagem</option>
                    </select>
                </div>
                
                <div id="youtube-link-section">
                    <label for="course-youtube-link" class="block text-sm font-medium text-gray-700 mb-1">Link do YouTube (opcional)</label>
                    <input type="url" id="course-youtube-link" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="https://www.youtube.com/watch?v=...">
                </div>
                
                <div id="file-upload-section">
                    <label for="course-file" class="block text-sm font-medium text-gray-700 mb-1">Upload de Arquivo (opcional)</label>
                    <input type="file" id="course-file" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="flex justify-end space-x-2">
                    <button type="button" id="cancel-course-form" class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition">Cancelar</button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Salvar Curso</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts JavaScript -->
    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBgWfocz6rpycz3SiJJ39Nfc1gNUd6kafk",
            authDomain: "imjachurch.firebaseapp.com",
            projectId: "imjachurch",
            storageBucket: "imjachurch.appspot.com",
            messagingSenderId: "145864254479",
            appId: "1:145864254479:web:3c1e6f5b3b5e5f5b5e5f5b"
        };
        
        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();
        
        // Configuração da IA Gemini
        const GEMINI_API_KEY = "AIzaSyA0-W114QCmGPdp_t-uMVa0Wsc7_NOEdn4";
        
        // Estado da aplicação
        let currentUser = null;
        let isAdmin = false;
        let courses = [];
        let currentCourse = null;
        
        // Elementos DOM
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const userArea = document.getElementById('user-area');
        const authButtons = document.getElementById('auth-buttons');
        const userName = document.getElementById('user-name');
        const userMenuBtn = document.getElementById('user-menu-btn');
        const userMenu = document.getElementById('user-menu');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const aiAssistantBtn = document.getElementById('ai-assistant-btn');
        const adminOnlyElements = document.querySelectorAll('.admin-only');
        
        // Modais
        const loginModal = document.getElementById('login-modal');
        const signupModal = document.getElementById('signup-modal');
        const aiModal = document.getElementById('ai-modal');
        const courseModal = document.getElementById('course-modal');
        const adminModal = document.getElementById('admin-modal');
        const courseFormModal = document.getElementById('course-form-modal');
        
        // Formulários
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const courseForm = document.getElementById('course-form');
        
        // Botões de fechar modais
        document.getElementById('close-login-modal').addEventListener('click', () => hideModal(loginModal));
        document.getElementById('close-signup-modal').addEventListener('click', () => hideModal(signupModal));
        document.getElementById('close-ai-modal').addEventListener('click', () => hideModal(aiModal));
        document.getElementById('close-course-modal').addEventListener('click', () => hideModal(courseModal));
        document.getElementById('close-admin-modal').addEventListener('click', () => hideModal(adminModal));
        document.getElementById('close-course-form-modal').addEventListener('click', () => hideModal(courseFormModal));
        
        // Alternar entre login e cadastro
        document.getElementById('switch-to-signup').addEventListener('click', () => {
            hideModal(loginModal);
            showModal(signupModal);
        });
        
        document.getElementById('switch-to-login').addEventListener('click', () => {
            hideModal(signupModal);
            showModal(loginModal);
        });
        
        // Funções para mostrar/ocultar modais
        function showModal(modal) {
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function hideModal(modal) {
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
        
        // Menu móvel
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        // Menu do usuário
        userMenuBtn.addEventListener('click', () => {
            userMenu.classList.toggle('hidden');
        });
        
        // Fechar menu ao clicar fora
        document.addEventListener('click', (e) => {
            if (!userMenuBtn.contains(e.target) && !userMenu.contains(e.target)) {
                userMenu.classList.add('hidden');
            }
        });
        
        // Abrir modais
        loginBtn.addEventListener('click', () => showModal(loginModal));
        signupBtn.addEventListener('click', () => showModal(signupModal));
        aiAssistantBtn.addEventListener('click', () => showModal(aiModal));
        
        // Painel administrativo
        document.querySelectorAll('.admin-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                // Remover classe active de todas as abas
                document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
                // Adicionar classe active à aba clicada
                tab.classList.add('active');
                
                // Ocultar todos os conteúdos de abas
                document.querySelectorAll('.admin-tab-content').forEach(content => content.classList.add('hidden'));
                // Mostrar o conteúdo da aba correspondente
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(`admin-${tabId}-tab`).classList.remove('hidden');
            });
        });
        
        // Login com e-mail/senha
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            try {
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                checkAdminStatus();
                hideModal(loginModal);
                showUserArea();
            } catch (error) {
                alert('Erro no login: ' + error.message);
            }
        });
        
        // Cadastro com e-mail/senha
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm-password').value;
            
            if (password !== confirmPassword) {
                alert('As senhas não coincidem!');
                return;
            }
            
            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                
                // Salvar informações adicionais do usuário no Firestore
                await db.collection('users').doc(currentUser.uid).set({
                    name: name,
                    email: email,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    isAdmin: false,
                    points: 0,
                    completedCourses: []
                });
                
                checkAdminStatus();
                hideModal(signupModal);
                showUserArea();
            } catch (error) {
                alert('Erro no cadastro: ' + error.message);
            }
        });
        
        // Login com Google
        document.getElementById('google-login-btn').addEventListener('click', signInWithGoogle);
        document.getElementById('google-signup-btn').addEventListener('click', signInWithGoogle);
        
        async function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            
            try {
                const result = await auth.signInWithPopup(provider);
                currentUser = result.user;
                
                // Verificar se o usuário já existe no Firestore
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                
                if (!userDoc.exists) {
                    // Criar novo usuário no Firestore
                    await db.collection('users').doc(currentUser.uid).set({
                        name: currentUser.displayName,
                        email: currentUser.email,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        isAdmin: false,
                        points: 0,
                        completedCourses: []
                    });
                }
                
                checkAdminStatus();
                hideModal(loginModal);
                hideModal(signupModal);
                showUserArea();
            } catch (error) {
                alert('Erro no login com Google: ' + error.message);
            }
        }
        
        // Logout
        logoutBtn.addEventListener('click', () => {
            auth.signOut();
        });
        
        // Monitorar estado de autenticação
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                await checkAdminStatus();
                showUserArea();
                loadCourses();
                
                if (isAdmin) {
                    loadAdminData();
                }
            } else {
                currentUser = null;
                isAdmin = false;
                hideUserArea();
            }
        });
        
        // Verificar se o usuário é administrador
        async function checkAdminStatus() {
            if (!currentUser) {
                isAdmin = false;
                return;
            }
            
            // Verificar se é o e-mail do administrador
            if (currentUser.email === 'denzelkhossa@gmail.com') {
                isAdmin = true;
                document.body.classList.add('admin-logged-in');
                return;
            }
            
            // Verificar no Firestore
            try {
                const userDoc = await db.collection('users').doc(currentUser.uid).get();
                if (userDoc.exists) {
                    const userData = userDoc.data();
                    isAdmin = userData.isAdmin || false;
                    
                    if (isAdmin) {
                        document.body.classList.add('admin-logged-in');
                    } else {
                        document.body.classList.remove('admin-logged-in');
                    }
                }
            } catch (error) {
                console.error('Erro ao verificar status de administrador:', error);
                isAdmin = false;
                document.body.classList.remove('admin-logged-in');
            }
        }
        
        // Mostrar área do usuário
        function showUserArea() {
            authButtons.classList.add('hidden');
            userArea.classList.remove('hidden');
            userName.textContent = currentUser.displayName || currentUser.email;
            
            // Adicionar botão do painel admin se for administrador
            if (isAdmin) {
                const adminBtn = document.createElement('button');
                adminBtn.id = 'admin-panel-btn';
                adminBtn.className = 'px-4 py-2 bg-yellow-500 text-white rounded-md hover:bg-yellow-600 transition';
                adminBtn.innerHTML = '<i class="fas fa-cog mr-2"></i>Painel Admin';
                adminBtn.addEventListener('click', () => showModal(adminModal));
                
                userArea.querySelector('.flex').insertBefore(adminBtn, userArea.querySelector('.relative'));
            } else {
                const existingAdminBtn = document.getElementById('admin-panel-btn');
                if (existingAdminBtn) {
                    existingAdminBtn.remove();
                }
            }
        }
        
        // Ocultar área do usuário
        function hideUserArea() {
            authButtons.classList.remove('hidden');
            userArea.classList.add('hidden');
            document.body.classList.remove('admin-logged-in');
            
            const existingAdminBtn = document.getElementById('admin-panel-btn');
            if (existingAdminBtn) {
                existingAdminBtn.remove();
            }
        }
        
        // Carregar cursos do Firestore
        async function loadCourses() {
            try {
                const coursesSnapshot = await db.collection('courses').get();
                courses = [];
                
                coursesSnapshot.forEach(doc => {
                    courses.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                
                renderCourses();
            } catch (error) {
                console.error('Erro ao carregar cursos:', error);
            }
        }
        
        // Renderizar cursos na página
        function renderCourses() {
            const coursesGrid = document.getElementById('courses-grid');
            coursesGrid.innerHTML = '';
            
            courses.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.className = 'course-card bg-white rounded-lg shadow overflow-hidden fade-in';
                courseCard.innerHTML = `
                    <div class="h-48 bg-gray-200 relative">
                        ${course.youtubeLink ? `
                            <img src="https://img.youtube.com/vi/${extractYouTubeId(course.youtubeLink)}/hqdefault.jpg" 
                                 alt="${course.title}" class="w-full h-full object-cover">
                            <div class="absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center">
                                <i class="fas fa-play text-white text-4xl"></i>
                            </div>
                        ` : `
                            <div class="w-full h-full flex items-center justify-center bg-gradient-to-r from-blue-500 to-blue-700">
                                <i class="fas fa-book-open text-white text-6xl"></i>
                            </div>
                        `}
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-lg">${course.title}</h3>
                            <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">${formatCategory(course.category)}</span>
                        </div>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-2">${course.description}</p>
                        <div class="flex justify-between items-center text-sm text-gray-500 mb-3">
                            <span><i class="fas fa-user-tie mr-1"></i>${course.instructor}</span>
                            <span><i class="fas fa-${getFormatIcon(course.format)} mr-1"></i>${formatFormat(course.format)}</span>
                        </div>
                        <button class="w-full py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition start-course-btn" data-course-id="${course.id}">
                            Iniciar Curso
                        </button>
                    </div>
                `;
                
                coursesGrid.appendChild(courseCard);
            });
            
            // Adicionar event listeners aos botões de iniciar curso
            document.querySelectorAll('.start-course-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const courseId = e.target.getAttribute('data-course-id');
                    openCourse(courseId);
                });
            });
        }
        
        // Abrir modal do curso
        function openCourse(courseId) {
            currentCourse = courses.find(c => c.id === courseId);
            
            if (!currentCourse) return;
            
            document.getElementById('course-modal-title').textContent = currentCourse.title;
            
            const courseContent = document.getElementById('course-modal-content');
            courseContent.innerHTML = `
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full">${formatCategory(currentCourse.category)}</span>
                        <span class="text-gray-600 text-sm"><i class="fas fa-user-tie mr-1"></i>${currentCourse.instructor}</span>
                    </div>
                    <p class="text-gray-700 mb-4">${currentCourse.description}</p>
                    
                    ${currentCourse.youtubeLink ? `
                        <div class="mb-4">
                            <h4 class="font-bold mb-2">Vídeo do Curso</h4>
                            <div class="aspect-w-16 aspect-h-9">
                                <iframe src="https://www.youtube.com/embed/${extractYouTubeId(currentCourse.youtubeLink)}" 
                                        frameborder="0" allowfullscreen class="w-full h-64 rounded-lg"></iframe>
                            </div>
                        </div>
                    ` : ''}
                    
                    ${currentCourse.fileUrl ? `
                        <div class="mb-4">
                            <h4 class="font-bold mb-2">Material do Curso</h4>
                            <div class="flex items-center justify-between p-3 bg-gray-100 rounded-lg">
                                <div class="flex items-center">
                                    <i class="fas fa-file-${getFileIcon(currentCourse.fileUrl)} text-blue-600 text-xl mr-3"></i>
                                    <span>${getFileName(currentCourse.fileUrl)}</span>
                                </div>
                                <a href="${currentCourse.fileUrl}" download class="px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
                                    <i class="fas fa-download mr-1"></i>Baixar
                                </a>
                            </div>
                        </div>
                    ` : ''}
                    
                    <div class="flex justify-between items-center mt-6">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-2">
                                <i class="fas fa-star text-yellow-500"></i>
                            </div>
                            <span>Ganhe 10 pontos ao concluir</span>
                        </div>
                        <button class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition complete-course-btn">
                            <i class="fas fa-check mr-1"></i>Marcar como Concluído
                        </button>
                    </div>
                </div>
            `;
            
            // Adicionar event listener ao botão de concluir curso
            document.querySelector('.complete-course-btn').addEventListener('click', completeCourse);
            
            showModal(courseModal);
        }
        
        // Concluir curso
        async function completeCourse() {
            if (!currentUser || !currentCourse) return;
            
            try {
                // Atualizar progresso do usuário
                const userRef = db.collection('users').doc(currentUser.uid);
                const userDoc = await userRef.get();
                const userData = userDoc.data();
                
                const completedCourses = userData.completedCourses || [];
                
                if (!completedCourses.includes(currentCourse.id)) {
                    completedCourses.push(currentCourse.id);
                    
                    await userRef.update({
                        completedCourses: completedCourses,
                        points: (userData.points || 0) + 10
                    });
                    
                    // Gerar certificado
                    generateCertificate();
                    
                    alert('Parabéns! Você concluiu o curso e ganhou 10 pontos!');
                    hideModal(courseModal);
                } else {
                    alert('Você já concluiu este curso!');
                }
            } catch (error) {
                console.error('Erro ao concluir curso:', error);
                alert('Erro ao concluir o curso. Tente novamente.');
            }
        }
        
        // Gerar certificado
        function generateCertificate() {
            // Esta função geraria um certificado em PDF
            // Por simplicidade, vamos apenas simular o download
            alert('Certificado gerado com sucesso! Em uma implementação real, um PDF seria baixado.');
        }
        
        // Assistente de IA
        document.getElementById('send-ai-message').addEventListener('click', sendAIMessage);
        document.getElementById('ai-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendAIMessage();
            }
        });
        
        async function sendAIMessage() {
            const input = document.getElementById('ai-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Adicionar mensagem do usuário ao chat
            addMessageToChat(message, 'user');
            input.value = '';
            
            try {
                // Simular resposta da IA (em uma implementação real, integraríamos com a API do Gemini)
                const response = await simulateGeminiResponse(message);
                addMessageToChat(response, 'ai');
            } catch (error) {
                addMessageToChat('Desculpe, ocorreu um erro ao processar sua mensagem. Tente novamente.', 'ai');
            }
        }
        
        function addMessageToChat(message, sender) {
            const chat = document.getElementById('ai-chat');
            const messageDiv = document.createElement('div');
            messageDiv.className = `${sender}-message mb-4 fade-in`;
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex items-start justify-end space-x-2">
                        <div class="bg-blue-600 text-white p-3 rounded-lg max-w-xs md:max-w-md">
                            <p>${message}</p>
                        </div>
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-white"></i>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2">
                        <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                            <i class="fas fa-robot text-white"></i>
                        </div>
                        <div class="bg-white p-3 rounded-lg max-w-xs md:max-w-md">
                            <p>${message}</p>
                        </div>
                    </div>
                `;
            }
            
            chat.appendChild(messageDiv);
            chat.scrollTop = chat.scrollHeight;
        }
        
        // Simular resposta da IA Gemini (em uma implementação real, usaríamos a API)
        async function simulateGeminiResponse(message) {
            // Simular um delay de rede
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('curso') || lowerMessage.includes('recomenda')) {
                return `Com base no seu interesse, recomendo os seguintes cursos:
                
1. **Empreendedorismo para Iniciantes** - Aprenda os fundamentos para iniciar seu próprio negócio
2. **Agricultura Sustentável** - Técnicas modernas de cultivo adaptadas ao clima de Moçambique
3. **Introdução à Programação** - Desenvolva habilidades digitais para o futuro

Qual área te interessa mais?`;
            } else if (lowerMessage.includes('agricultura') || lowerMessage.includes('cultivo')) {
                return `Para agricultura, temos cursos específicos sobre:
                
- Técnicas de irrigação eficiente
- Cultivo de produtos locais como mandioca e milho
- Uso sustentável do solo
- Combate a pragas de forma natural

Gostaria de saber mais sobre algum desses tópicos?`;
            } else if (lowerMessage.includes('certificado')) {
                return `Ao concluir qualquer curso na plataforma, você receberá automaticamente um certificado digital em PDF com QR Code para validação. Os certificados são gratuitos e podem ser usados para enriquecer seu currículo.`;
            } else {
                return `Obrigado pela sua pergunta! Como assistente de IA do Aprende Moçambique, posso ajudar você a:
                
- Encontrar cursos adequados aos seus interesses
- Explicar conceitos dos cursos
- Dar dicas de estudo personalizadas
- Acompanhar seu progresso

Em que posso ajudar especificamente?`;
            }
        }
        
        // Painel administrativo - Adicionar curso
        document.getElementById('add-course-btn').addEventListener('click', () => {
            document.getElementById('course-form-title').textContent = 'Adicionar Novo Curso';
            document.getElementById('course-id').value = '';
            document.getElementById('course-form').reset();
            showModal(courseFormModal);
        });
        
        // Formulário de curso
        courseForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const courseId = document.getElementById('course-id').value;
            const title = document.getElementById('course-title').value;
            const description = document.getElementById('course-description').value;
            const instructor = document.getElementById('course-instructor').value;
            const category = document.getElementById('course-category').value;
            const format = document.getElementById('course-format').value;
            const youtubeLink = document.getElementById('course-youtube-link').value;
            const file = document.getElementById('course-file').files[0];
            
            try {
                let fileUrl = '';
                
                // Fazer upload do arquivo se houver
                if (file) {
                    const storageRef = storage.ref();
                    const fileRef = storageRef.child(`courses/${Date.now()}_${file.name}`);
                    await fileRef.put(file);
                    fileUrl = await fileRef.getDownloadURL();
                }
                
                const courseData = {
                    title,
                    description,
                    instructor,
                    category,
                    format,
                    youtubeLink: youtubeLink || '',
                    fileUrl,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                };
                
                if (courseId) {
                    // Atualizar curso existente
                    await db.collection('courses').doc(courseId).update(courseData);
                } else {
                    // Adicionar novo curso
                    await db.collection('courses').add(courseData);
                }
                
                hideModal(courseFormModal);
                loadCourses();
                loadAdminData();
            } catch (error) {
                alert('Erro ao salvar curso: ' + error.message);
            }
        });
        
        // Carregar dados do painel administrativo
        async function loadAdminData() {
            if (!isAdmin) return;
            
            try {
                // Carregar estatísticas
                const usersSnapshot = await db.collection('users').get();
                const coursesSnapshot = await db.collection('courses').get();
                
                document.getElementById('total-users').textContent = usersSnapshot.size;
                document.getElementById('total-courses').textContent = coursesSnapshot.size;
                
                // Calcular cursos concluídos
                let completedCount = 0;
                usersSnapshot.forEach(doc => {
                    const userData = doc.data();
                    if (userData.completedCourses) {
                        completedCount += userData.completedCourses.length;
                    }
                });
                
                document.getElementById('completed-courses').textContent = completedCount;
                
                // Carregar lista de cursos para administração
                const adminCoursesList = document.getElementById('admin-courses-list');
                adminCoursesList.innerHTML = '';
                
                courses.forEach(course => {
                    const courseItem = document.createElement('div');
                    courseItem.className = 'flex justify-between items-center p-3 border-b';
                    courseItem.innerHTML = `
                        <div>
                            <h5 class="font-bold">${course.title}</h5>
                            <p class="text-sm text-gray-600">${course.instructor} • ${formatCategory(course.category)}</p>
                        </div>
                        <div class="flex space-x-2">
                            <button class="edit-course-btn px-3 py-1 bg-blue-600 text-white rounded-md text-sm" data-course-id="${course.id}">
                                <i class="fas fa-edit mr-1"></i>Editar
                            </button>
                            <button class="delete-course-btn px-3 py-1 bg-red-600 text-white rounded-md text-sm" data-course-id="${course.id}">
                                <i class="fas fa-trash mr-1"></i>Excluir
                            </button>
                        </div>
                    `;
                    
                    adminCoursesList.appendChild(courseItem);
                });
                
                // Adicionar event listeners aos botões de editar e excluir
                document.querySelectorAll('.edit-course-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const courseId = e.target.closest('button').getAttribute('data-course-id');
                        editCourse(courseId);
                    });
                });
                
                document.querySelectorAll('.delete-course-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const courseId = e.target.closest('button').getAttribute('data-course-id');
                        deleteCourse(courseId);
                    });
                });
                
                // Carregar lista de usuários
                const adminUsersList = document.getElementById('admin-users-list');
                adminUsersList.innerHTML = '';
                
                usersSnapshot.forEach(doc => {
                    const userData = doc.data();
                    const userItem = document.createElement('div');
                    userItem.className = 'flex justify-between items-center p-3 border-b';
                    userItem.innerHTML = `
                        <div>
                            <h5 class="font-bold">${userData.name}</h5>
                            <p class="text-sm text-gray-600">${userData.email} • ${userData.points || 0} pontos</p>
                        </div>
                        <div>
                            <span class="text-sm ${userData.isAdmin ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800'} px-2 py-1 rounded-full">
                                ${userData.isAdmin ? 'Administrador' : 'Usuário'}
                            </span>
                        </div>
                    `;
                    
                    adminUsersList.appendChild(userItem);
                });
            } catch (error) {
                console.error('Erro ao carregar dados administrativos:', error);
            }
        }
        
        // Editar curso
        function editCourse(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;
            
            document.getElementById('course-form-title').textContent = 'Editar Curso';
            document.getElementById('course-id').value = course.id;
            document.getElementById('course-title').value = course.title;
            document.getElementById('course-description').value = course.description;
            document.getElementById('course-instructor').value = course.instructor;
            document.getElementById('course-category').value = course.category;
            document.getElementById('course-format').value = course.format;
            document.getElementById('course-youtube-link').value = course.youtubeLink || '';
            
            showModal(courseFormModal);
        }
        
        // Excluir curso
        async function deleteCourse(courseId) {
            if (!confirm('Tem certeza que deseja excluir este curso?')) return;
            
            try {
                await db.collection('courses').doc(courseId).delete();
                loadCourses();
                loadAdminData();
            } catch (error) {
                alert('Erro ao excluir curso: ' + error.message);
            }
        }
        
        // Funções auxiliares
        function extractYouTubeId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : null;
        }
        
        function formatCategory(category) {
            const categories = {
                'empreendedorismo': 'Empreendedorismo',
                'agricultura': 'Agricultura',
                'programacao': 'Programação',
                'idiomas': 'Idiomas',
                'saude': 'Saúde',
                'religiao': 'Religião'
            };
            return categories[category] || category;
        }
        
        function formatFormat(format) {
            const formats = {
                'video': 'Vídeo',
                'pdf': 'PDF',
                'audio': 'Áudio',
                'imagem': 'Imagem'
            };
            return formats[format] || format;
        }
        
        function getFormatIcon(format) {
            const icons = {
                'video': 'play-circle',
                'pdf': 'file-pdf',
                'audio': 'volume-up',
                'imagem': 'image'
            };
            return icons[format] || 'file';
        }
        
        function getFileIcon(url) {
            if (url.includes('.pdf')) return 'pdf';
            if (url.includes('.mp4') || url.includes('.avi')) return 'video';
            if (url.includes('.mp3') || url.includes('.wav')) return 'audio';
            if (url.includes('.jpg') || url.includes('.png')) return 'image';
            return 'download';
        }
        
        function getFileName(url) {
            return url.split('/').pop().split('?')[0];
        }
        
        // Inicializar a aplicação
        document.addEventListener('DOMContentLoaded', () => {
            // Adicionar event listeners para filtros de categoria
            document.querySelectorAll('.category-filter').forEach(filter => {
                filter.addEventListener('click', (e) => {
                    // Remover classe active de todos os filtros
                    document.querySelectorAll('.category-filter').forEach(f => f.classList.remove('active', 'bg-blue-600', 'text-white'));
                    document.querySelectorAll('.category-filter').forEach(f => f.classList.add('bg-gray-200', 'text-gray-700'));
                    
                    // Adicionar classe active ao filtro clicado
                    e.target.classList.add('active', 'bg-blue-600', 'text-white');
                    e.target.classList.remove('bg-gray-200', 'text-gray-700');
                    
                    // Filtrar cursos (em uma implementação real, filtraríamos a lista)
                    const category = e.target.getAttribute('data-category');
                    // Por simplicidade, vamos apenas recarregar todos os cursos
                    loadCourses();
                });
            });
            
            // Carregar cursos iniciais
            loadCourses();
        });
    </script>
</body>
</html>